"use strict";(globalThis.webpackChunksoft_kitty_docs=globalThis.webpackChunksoft_kitty_docs||[]).push([[9859],{6131(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"core/general/AssetLoader","title":"AssetLoader","description":"AssetLoader is a base class responsible for handling asset loading, including prefabs, textures, audio clips, and more.","source":"@site/docs/core/general/AssetLoader.md","sourceDirName":"core/general","slug":"/core/general/AssetLoader","permalink":"/docs/core/general/AssetLoader","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"AssetLoader"},"sidebar":"docs","previous":{"title":"Game Manager","permalink":"/docs/core/general/game-manager"},"next":{"title":"Overview","permalink":"/docs/core/entities/overview"}}');var a=s(4848),r=s(8453);const d={title:"AssetLoader"},l=void 0,o={},i=[{value:"Methods",id:"methods",level:3},{value:"<code>public virtual T Load&lt;T&gt;(string _path) where T : UnityEngine.Object</code>",id:"public-virtual-t-loadtstring-_path-where-t--unityengineobject",level:4},{value:"<code>public virtual T LoadAndInstantiate&lt;T&gt;(string _path) where T : UnityEngine.Object</code>",id:"public-virtual-t-loadandinstantiatetstring-_path-where-t--unityengineobject",level:4},{value:"<code>public virtual void ReleaseAllBundles(bool _unloadAllLoadedObjects)</code>",id:"public-virtual-void-releaseallbundlesbool-_unloadallloadedobjects",level:4},{value:"<code>public virtual void ReleaseAllLoadedAsset()</code>",id:"public-virtual-void-releaseallloadedasset",level:4},{value:"<code>public virtual void ReleaseAsset(string _path)</code>",id:"public-virtual-void-releaseassetstring-_path",level:4}];function c(e){const n={a:"a",code:"code",em:"em",h3:"h3",h4:"h4",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"class AssetLoader\n"})}),"\n",(0,a.jsx)(n.p,{children:"AssetLoader is a base class responsible for handling asset loading, including prefabs, textures, audio clips, and more."}),"\n",(0,a.jsxs)(n.p,{children:["Inherit from this class to create your own loader script, override the load methods as needed (eg: Asset Bundles, Addressable), then attach the script to an empty prefab and assign it in ",(0,a.jsx)(n.a,{href:"/docs/core/general/SGD_Settings",children:"SGD_Settings"})," via:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"Project Settings > SoftKitty > Data Settings > General > Custom Loader"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(n.h4,{id:"public-virtual-t-loadtstring-_path-where-t--unityengineobject",children:(0,a.jsx)(n.code,{children:"public virtual T Load<T>(string _path) where T : UnityEngine.Object"})}),"\n",(0,a.jsx)(n.p,{children:"Load an Asset from AssetBundle or your custom loading method. Loaded bundle will be add to a Dictionary."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example code for load from Addressables"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"public override T Load<T>(string _path) where T : UnityEngine.Object{\r\n   var op = Addressables.LoadAssetAsync<T>(_path);\r\n   T go = op.WaitForCompletion();\r\n   return go;\r\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example code for load from AssetBundle"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'/// In this example, the bundle path and the object path are separated using "#".\r\n/// For example, an object with the path "icons/food" stored in a bundle named "IconData"\r\n/// would be accessed using the path: "IconData#icons/food".\r\npublic override T Load<T>(string _path) where T : UnityEngine.Object{\r\n    string[] _args = _path.Split("#");\r\n    if (_args.Length >= 2)\r\n    {\r\n        AssetBundle myLoadedAssetBundle=null;\r\n        if (LoadedBundle.ContainsKey(_args[0]))\r\n        {\r\n            myLoadedAssetBundle = LoadedBundle[_args[0]];\r\n        }\r\n        else\r\n        {\r\n            myLoadedAssetBundle = AssetBundle.LoadFromFile(Path.Combine(Application.streamingAssetsPath, _args[0]));\r\n            if (myLoadedAssetBundle == null)\r\n            {\r\n                Debug.Log("Failed to load AssetBundle: " + _args[0]);\r\n                return null;\r\n            }\r\n            else\r\n            {\r\n                LoadedBundle.Add(_args[0], myLoadedAssetBundle);\r\n            }\r\n        }\r\n               \r\n        var go = myLoadedAssetBundle.LoadAsset<T>(_args[1]);\r\n        return go;\r\n    }\r\n    else\r\n    {\r\n        Debug.Log("The path must be in this format: BundleName#ObjectPath,  for example: IconData#icons/food" + _args[0]);\r\n        return null;\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h4,{id:"public-virtual-t-loadandinstantiatetstring-_path-where-t--unityengineobject",children:(0,a.jsx)(n.code,{children:"public virtual T LoadAndInstantiate<T>(string _path) where T : UnityEngine.Object"})}),"\n",(0,a.jsx)(n.p,{children:"Load and Instantiate an Asset from AssetBundle or your custom loading method. Loaded bundle will be add to a Dictionary."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example code for load from Addressables"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"public override T LoadAndInstantiate<T>(string _path) where T : UnityEngine.Object{\r\n    var _handle = Addressables.LoadAssetAsync<T>(_path);\r\n    T _ref = _handle.WaitForCompletion();\r\n    if (_ref != null)\r\n    {\r\n        var op = Addressables.InstantiateAsync(_path);\r\n        T newObj = op.Result;\r\n        Addressables.Release(_handle);\r\n        //Make sure to call Addressables.Release(newObj); when this object is about to destroied!!\r\n        return newObj;\r\n    }\r\n    else\r\n    {\r\n        return null;\r\n    }\r\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example code for load from AssetBundle"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'/// In this example, the bundle path and the object path are separated using "#".\r\n/// For example, an object with the path "icons/food" stored in a bundle named "IconData"\r\n/// would be accessed using the path: "IconData#icons/food".\r\npublic override T LoadAndInstantiate<T>(string _path) where T : UnityEngine.Object{\r\n    string[] _args = _path.Split("#");\r\n    if (_args.Length >= 2)\r\n    {\r\n        AssetBundle myLoadedAssetBundle = null;\r\n        if (LoadedBundle.ContainsKey(_args[0]))\r\n        {\r\n            myLoadedAssetBundle = LoadedBundle[_args[0]];\r\n        }\r\n        else\r\n        {\r\n            myLoadedAssetBundle = AssetBundle.LoadFromFile(Path.Combine(Application.streamingAssetsPath, _args[0]));\r\n            if (myLoadedAssetBundle == null)\r\n            {\r\n                Debug.Log("Failed to load AssetBundle: " + _args[0]);\r\n                return null;\r\n            }\r\n            else\r\n            {\r\n                LoadedBundle.Add(_args[0], myLoadedAssetBundle);\r\n            }\r\n        }\r\n        var go = myLoadedAssetBundle.LoadAsset<T>(_args[1]);\r\n        return Instantiate(go);\r\n    }\r\n    else\r\n    {\r\n        Debug.Log("The path must be in this format: BundleName#ObjectPath,  for example: IconData#icons/food" + _args[0]);\r\n        return null;\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h4,{id:"public-virtual-void-releaseallbundlesbool-_unloadallloadedobjects",children:(0,a.jsx)(n.code,{children:"public virtual void ReleaseAllBundles(bool _unloadAllLoadedObjects)"})}),"\n",(0,a.jsx)(n.p,{children:"Release all loaded AssetBundle."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h4,{id:"public-virtual-void-releaseallloadedasset",children:(0,a.jsx)(n.code,{children:"public virtual void ReleaseAllLoadedAsset()"})}),"\n",(0,a.jsx)(n.p,{children:"Release all loaded icons and custom assets from the memory."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h4,{id:"public-virtual-void-releaseassetstring-_path",children:(0,a.jsx)(n.code,{children:"public virtual void ReleaseAsset(string _path)"})}),"\n",(0,a.jsx)(n.p,{children:"When 'ReleaseLoadedAsset()' is called from an item, this method will be called with the unloading asset.\r\nYou can override this method to handle it."}),"\n",(0,a.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>l});var t=s(6540);const a={},r=t.createContext(a);function d(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);